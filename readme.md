# view-json [![NPM version](https://img.shields.io/npm/v/view-json.svg)](https://www.npmjs.com/package/view-json) [![Build Status](https://img.shields.io/travis/jonschlinkert/view-json.svg)](https://travis-ci.org/jonschlinkert/view-json)

> View plugin for templates.js, assemble or verb, that calls JSON.parse on .json files and keeps `file.content` in sync with `file.json.data`.

## Install

Install with [npm](https://www.npmjs.com/):

```sh
$ npm i view-json --save
```

The use case for this is to be able to easily update values on a JSON file as it progresses through a plugin pipeline or middleware stack (without having to repeatedly write the code to parse and stringify it).

## Usage

Can be used with any application based on [templates](https://github.com/jonschlinkert/templates), including [assemble](http://assemble.io), [verb](https://github.com/verbose/verb), and [update](https://github.com/jonschlinkert/update).

```js
var json = require('view-json');
var templates = require('templates');

var app = templates();
app.use(json());
```

* When a file with a `.json` extension is created, this plugin automatically parses the `file.contents` property and adds the resulting object to `file.json.data`.
* `file.json` has `.get` and `.set` methods for getting or setting properties from `file.data`
* when `.set` is called, `file.data` and `file.content` are both updated.

**Example**

```js
// create a collection
app.create('files');

// add a "view" to the new collection
var file = app.file('package.json', {content: '{"name": "foo"}'});
console.log(file.json.get('name'));
//=> "foo"

file.json.set('name', 'bar');
console.log(file.contents.toString());
//=> '{"name": "bar"}'
```

fwiw, with minor modifications this could also be used with vinyl files. Let me know if you're interested by creating an issue, and I'll make the modifications.

## API

## Related projects

* [assemble](https://www.npmjs.com/package/assemble): Assemble is a powerful, extendable and easy to use static site generator for node.js. Used… [more](https://www.npmjs.com/package/assemble) | [homepage](https://github.com/assemble/assemble)
* [base](https://www.npmjs.com/package/base): base is the foundation for creating modular, unit testable and highly pluggable node.js applications, starting… [more](https://www.npmjs.com/package/base) | [homepage](https://github.com/node-base/base)
* [generate](https://www.npmjs.com/package/generate): Fast, composable, highly extendable project generator with a user-friendly and expressive API. | [homepage](https://github.com/generate/generate)
* [templates](https://www.npmjs.com/package/templates): System for creating and managing template collections, and rendering templates with any node.js template engine.… [more](https://www.npmjs.com/package/templates) | [homepage](https://github.com/jonschlinkert/templates)
* [update](https://www.npmjs.com/package/update): Easily keep anything in your project up-to-date by installing the updaters you want to use… [more](https://www.npmjs.com/package/update) | [homepage](https://github.com/update/update)
* [verb](https://www.npmjs.com/package/verb): Documentation generator for GitHub projects. Verb is extremely powerful, easy to use, and is used… [more](https://www.npmjs.com/package/verb) | [homepage](https://github.com/verbose/verb)
* [vinyl](https://www.npmjs.com/package/vinyl): A virtual file format | [homepage](http://github.com/gulpjs/vinyl)

## Running tests

Install dev dependencies:

```sh
$ npm i -d && npm test
```

## Contributing

Pull requests and stars are always welcome. For bugs and feature requests, [please create an issue](https://github.com/jonschlinkert/view-json/issues/new).

## Author

**Jon Schlinkert**

* [github/jonschlinkert](https://github.com/jonschlinkert)
* [twitter/jonschlinkert](http://twitter.com/jonschlinkert)

## License

Copyright © 2016 [Jon Schlinkert](https://github.com/jonschlinkert)
Released under the MIT license.

***

_This file was generated by [verb](https://github.com/verbose/verb) on January 23, 2016._